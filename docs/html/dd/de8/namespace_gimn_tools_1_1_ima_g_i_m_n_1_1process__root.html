<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GimnTools: GimnTools.ImaGIMN.process_root Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GimnTools<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Set of tools for image processing developed on GIMN</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dd/de8/namespace_gimn_tools_1_1_ima_g_i_m_n_1_1process__root.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GimnTools.ImaGIMN.process_root Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae9d6e443b2e2139227deb3cdcd1ade4d" id="r_ae9d6e443b2e2139227deb3cdcd1ade4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9d6e443b2e2139227deb3cdcd1ade4d">coincidence_to_lor</a> (str file_name, dict detector_config, dict detectors_angles, parameters, matrix=[64, 64, 64], rsectors={ 0 :&quot;detector-1&quot;, 1 :&quot;detector-2&quot;}, id=0)</td></tr>
<tr class="memdesc:ae9d6e443b2e2139227deb3cdcd1ade4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function aims to convert the coincidence event positions into a lor and get the sinogram from it.  <br /></td></tr>
<tr class="memitem:adf8a617d2902ebaf990bf2b0dc33dce7" id="r_adf8a617d2902ebaf990bf2b0dc33dce7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf8a617d2902ebaf990bf2b0dc33dce7">coincidence_to_lor</a> (str file_name, dict detector_config, dict detectors_angles, parameters, matrix=[64, 64, 64], rsectors={ 0 :&quot;detector-1&quot;, 1 :&quot;detector-2&quot;})</td></tr>
<tr class="memdesc:adf8a617d2902ebaf990bf2b0dc33dce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes coincidence event data from PET (Positron Emission Tomography) experiments and converts them into Lines of Response (LORs) for sinogram generation.  <br /></td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="adf8a617d2902ebaf990bf2b0dc33dce7" name="adf8a617d2902ebaf990bf2b0dc33dce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf8a617d2902ebaf990bf2b0dc33dce7">&#9670;&#160;</a></span>coincidence_to_lor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coincidence_to_lor </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>detector_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>detectors_angles</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>parameters</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>matrix</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[64,64,64]</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rsectors</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{&#160;0&#160;:&#160;&quot;detector-1&quot;,1&#160;:&#160;&quot;detector-2&quot;}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes coincidence event data from PET (Positron Emission Tomography) experiments and converts them into Lines of Response (LORs) for sinogram generation. </p>
<p>This function reads coincidence event data from a ROOT file, processes the events according to the specified detector configuration, and computes the corresponding LORs. The function supports different processing modes based on the detector configuration, such as using crystal IDs or global positions provided by simulation tools like GATE or PETSYS. For each event, it calculates the distance and angle of the LOR in the sinogram space, determines the corresponding slice, and fills the sinogram accordingly. The function also handles gantry rotation by updating the system geometry as needed for each run. The results are returned as a sinogram array and a DataFrame containing the LOR parameters for further analysis or visualization. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>Path to the ROOT file containing the coincidence event data. </td></tr>
    <tr><td class="paramname">detector_config</td><td>Dictionary containing the configuration of the detector system, including processing mode, number of detectors, rotation angles, and other relevant parameters. </td></tr>
    <tr><td class="paramname">detectors_angles</td><td>Dictionary specifying the angular positions of the detectors. </td></tr>
    <tr><td class="paramname">parameters</td><td>List or structure specifying which parameters to extract from the event data. </td></tr>
    <tr><td class="paramname">matrix</td><td>List of three integers specifying the dimensions of the sinogram matrix (default: [64, 64, 64]). </td></tr>
    <tr><td class="paramname">rsectors</td><td>Dictionary mapping rsector IDs to detector names (default: {0: "detector-1", 1: "detector-2"}).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tuple containing:<ul>
<li>sin: Numpy array representing the filled sinogram.</li>
<li>df: Pandas DataFrame with columns 'distance', 'angle', and 'slice', containing the LOR parameters for each processed event. </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function supports multiple processing modes, including:<ul>
<li>"CrystalID": Uses crystal IDs to compute event positions.</li>
<li>"GateGlobalPositions": Uses global positions provided by GATE.</li>
<li>"PaulGlobalPosition": Uses global positions with a specific axis convention. The function also visualizes the sinogram for certain processing steps and prints debug information for tracking the computation. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ae9d6e443b2e2139227deb3cdcd1ade4d" name="ae9d6e443b2e2139227deb3cdcd1ade4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9d6e443b2e2139227deb3cdcd1ade4d">&#9670;&#160;</a></span>coincidence_to_lor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coincidence_to_lor </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>detector_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>detectors_angles</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>parameters</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>matrix</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[64,64,64]</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rsectors</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{&#160;0&#160;:&#160;&quot;detector-1&quot;,1&#160;:&#160;&quot;detector-2&quot;}</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>id</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function aims to convert the coincidence event positions into a lor and get the sinogram from it. </p>
<p>input: file_name : path to the file that will be open detector_config : dictionary containing the detector configuration file, that have information about number of detectors, type of positioning method that will be used .... detector_angles: stands for the position and angle of each detector. parameters: that will be used from root_file </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../db/dee/namespace_gimn_tools.html">GimnTools</a></li><li class="navelem"><a href="../../df/d10/namespace_gimn_tools_1_1_ima_g_i_m_n.html">ImaGIMN</a></li><li class="navelem"><a href="../../dd/de8/namespace_gimn_tools_1_1_ima_g_i_m_n_1_1process__root.html">process_root</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
